{{define "body"}}
<h2>Login</h2>
<form id="login-form">
    <label for="username">Username:</label>
    <br />
    <input
        type="text"
        id="username"
        name="username"
        maxlength="256"
        required="required"
        autofocus
    >
    <br />
    <label for="password">Password:</label>
    <br />
    <input
        type="password"
        id="password"
        name="password"
        required="required"
    >
    <br />
    <br />
    <input
        type="submit"
        value="Login"
    >
</form>
<script>
    document.getElementById("login-form").addEventListener("submit", function (event) {
        event.preventDefault();
        const formData = new FormData(this);
        toggleLoading();
        fetch("/api/login", { method: "POST", body: formData }).then((response) => {
            if (response.ok) {
                location.reload();
            } else {
                response.text().then((text) => notifyError(text));
                toggleLoading();
            }
        });
    });
</script>
{{end}}